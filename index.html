<!DOCTYPE html>
<html>
  <head>
    <title>Metamask Connection</title>
    <!-- Import Web3 library from CDN -->
    <script src='https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js'></script>
  </head>
  <body>
    <h1>Metamask Connection</h1>

    <!-- button to connect Metamask -->
    <button id='connectButton'>Connect to Metamask</button>

    <!-- display the connected account -->
    <h2 id='connectedAccount'>null</h2>

    <script type='module'>
      //listen for a `click` to connect when clicking the button
      document.getElementById('connectButton').addEventListener('click', async () => {
        //check if Metamask is installed
        if (window.ethereum) {
          const web3 = new Web3(window.ethereum);
          // Request the user to connect accounts (Metamask will prompt)
          await window.ethereum.request({ method: 'eth_requestAccounts' });

          // Get the connected accounts
          const accounts = await web3.eth.getAccounts();

          // Display the connected account
          document.getElementById('connectedAccount').innerText = accounts[0];
        } else {
          // Alert the user to download Metamask
          alert('Please download Metamask');
        }
      });
    </script>

  </body>
</html>
